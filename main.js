(()=>{class e{constructor(e,t,o,d){this.title=e,this.project=t,this.description=o,this.dueDate=d,this.completed=!1}addTodoToProject(){n.todos.push(this)}}class t{constructor(e,t=[]){this.title=e,this.todos=t}addProjectToList(){d.push(this),r()}displayTodos(){n=this,document.getElementById("project-title").innerHTML=n.title;const e=document.getElementById("todo-list");e.innerHTML="";const t=document.createElement("div");t.classList.add("container"),e.appendChild(t);const o=document.createElement("div");o.classList.add("row"),t.appendChild(o);const d=document.createElement("div");d.classList.add("col-8"),o.appendChild(d);const l=document.createElement("div");l.classList.add("col-4"),l.innerHTML="Due Date",o.appendChild(l);for(let e=0;e<n.todos.length;e++){const o=document.createElement("div");o.classList.add("row","todo-item"),t.appendChild(o);const d=document.createElement("div");d.classList.add("col-1","center"),o.appendChild(d);const l=document.createElement("img");l.classList.add("checkbox"),l.id=e,n.todos[e].completed?(l.src="../images/checkbox.svg",l.alt="checked",o.style.opacity=.5):(l.src="../images/blank-check-box.svg",l.alt="unchecked"),l.addEventListener("click",(function(){n.todos[e].completed?n.todos[e].completed=!1:n.todos[e].completed=!0,n.displayTodos()})),d.appendChild(l);const c=document.createElement("div");c.classList.add("col-7","col-text"),c.innerHTML=n.todos[e].title,n.todos[e].completed&&(c.style.textDecoration="line-through"),c.addEventListener("click",(()=>this.editTodo(e))),o.appendChild(c);const s=document.createElement("div");s.classList.add("col-2","col-text"),s.innerHTML=n.todos[e].dueDate,o.appendChild(s);const i=document.createElement("div");i.classList.add("col-1","col-text"),o.appendChild(i);const a=document.createElement("img");a.classList.add("edit"),a.src="../images/edit.svg",a.alt="edit",a.id=e,a.addEventListener("click",(()=>this.editTodo(e))),i.appendChild(a);const r=document.createElement("div");r.classList.add("col-1"),o.appendChild(r);const m=document.createElement("img");m.classList.add("trash"),m.src="../images/trash-can.svg",m.alt="delete",m.id=e,m.addEventListener("click",(e=>p(e))),r.appendChild(m)}}editTodo(e){const t=document.createElement("div");t.classList.add("modal"),t.style.display="block";const o=document.createElement("editTodoModalContent");o.classList.add("modal-content"),t.appendChild(o);const d=document.createElement("div");d.classList.add("custom-flex"),o.appendChild(d);const c=document.createElement("h2");c.innerHTML="Edit Todo",d.appendChild(c);const s=document.createElement("span");function i(){t.style.display="none",console.log("fired")}s.classList.add("close"),s.innerHTML="&times;",s.addEventListener("click",(()=>i())),d.appendChild(s);const a=document.createElement("form");o.appendChild(a);const r=document.createElement("label");r.setAttribute("for","title"),r.innerHTML="Task Name:",a.appendChild(r);const p=document.createElement("br");a.appendChild(p);const m=document.createElement("input");m.setAttribute("type","text"),m.id="editTodoTitle",m.setAttribute("name","title"),m.value=n.todos[e].title,a.appendChild(m),a.appendChild(p);const u=document.createElement("label");u.setAttribute("for","description"),u.innerHTML="Description:",a.appendChild(u),a.appendChild(p);const h=document.createElement("textarea");h.setAttribute("type","text"),h.id="editTodoDescription",h.setAttribute("name","title"),h.setAttribute("rows","4"),h.value=n.todos[e].description,a.appendChild(h),a.appendChild(p);const g=document.createElement("label");g.setAttribute("for","date"),g.innerHTML="Date:",a.appendChild(g),a.appendChild(p);const y=document.createElement("input");y.setAttribute("type","text"),y.id="editTodoDate",y.setAttribute("name","date"),y.value=n.todos[e].dueDate,a.appendChild(y),a.appendChild(p);const E=document.createElement("button");E.setAttribute("type","button"),E.id="editTodoSave",E.innerHTML="Save",E.addEventListener("click",(function(){console.log(e),console.log(m.value),n.todos[e].title=m.value,console.log(h.value),n.todos[e].description=h.value,console.log(y.value),n.todos[e].dueDate=y.value,i(),n.displayTodos()})),a.appendChild(E),document.getElementById("modalAppend").appendChild(t),l(),window.addEventListener("click",(function(e){e.target==t&&(t.style.display="none")}))}}const o=document.getElementById("projects-list");let d=[],n="";function l(){localStorage.setItem("projects",JSON.stringify(d))}!function(){if(localStorage.projects)d=JSON.parse(localStorage.projects),d=function(){for(let e=0;e<d.length;e++)console.log(d[e]),console.log(d[e].title),console.log(d[e].todos),d[e]=new t(d[e].title,d[e].todos),console.log(d[e]);return d}(),r(),n=d[0],n.displayTodos();else{const o=new t("Default Project");n=o,new e("Eat chicken",o.title,"go back","11/02/1993").addTodoToProject(),o.addProjectToList(),o.displayTodos()}}();const c=document.getElementById("projectsModal"),s=document.getElementById("add-project"),i=document.getElementById("projectModalClose");s.addEventListener("click",(function(){c.style.display="block"})),i.onclick=function(){c.style.display="none"},window.addEventListener("click",(function(e){e.target==c&&(c.style.display="none")}));const a=document.getElementById("projectTitle");function r(){o.innerHTML="";for(let e=0;e<d.length;e++){console.log(d),console.log(d[e]);const t=document.createElement("div"),l=document.createElement("h4");l.classList.add("projectTitle"),l.id=e,l.innerHTML=d[e].title,t.appendChild(l);const c=document.createElement("img");c.src="../images/trash-can.svg",c.classList.add("trash"),c.classList.add("hoverAppear"),c.style.opacity=0,c.addEventListener("click",(function(){d.splice(e,1),console.log(d[e]),console.log(d),console.log(d[e-1]),console.log(d[e+1]),d[e-1]?(n=d[e-1],n.displayTodos()):d[e]?(n=d[e],n.displayTodos()):(n="",document.getElementById("todo-list").innerHTML="",document.getElementById("project-title").innerHTML="Todos"),r()})),t.classList.add("project-flex"),t.addEventListener("mouseover",(function(){c.style.opacity=.5})),t.addEventListener("mouseout",(function(){c.style.opacity=0})),t.appendChild(c),console.log(d[e]),l.addEventListener("click",(()=>d[e].displayTodos())),o.appendChild(t)}l()}function p(e){n.todos.splice(e.target.id,1),n.displayTodos(),l()}document.getElementById("projectSave").addEventListener("click",(()=>function(o){const d=new t(o);d.todos.push(new e("log in","Work","log on to PC","14/01/2021")),d.todos.push(new e("rama","krishna","log on to PC","14/01/2021")),d.addProjectToList(),d.displayTodos(),c.style.display="none"}(a.value)));const m=document.getElementById("editTodoModal");document.getElementById("editTodoModalClose").onclick=()=>(m.style.display="none",void console.log("fired")),window.addEventListener("click",(function(e){e.target==m&&(m.style.display="none")}));var u=document.getElementById("addTodoModal"),h=document.getElementById("add-todo"),g=document.getElementById("modalClose");function y(){u.style.display="none"}h.onclick=()=>{u.style.display="block"},g.onclick=()=>y(),window.addEventListener("click",(function(e){e.target==u&&(u.style.display="none")})),document.getElementById("addTodoSave").addEventListener("click",(()=>function(){let t=document.getElementById("addTodoTitle"),o=document.getElementById("addTodoDescription"),d=document.getElementById("addTodoDate");const c=new e(t.value,n.title,o.value,d.value);console.log(c),c.addTodoToProject(),n.displayTodos(),y(),l()}()))})();